(function(){"use strict";!function(t,e){"function"==typeof define&&define.amd?define(["d3","jquery"],e):"object"==typeof exports?module.exports=e(require("d3"),require("jquery")):t.MG=e(t.d3,t.jQuery)}(this,function(t,e){function r(t){var r=e(t.target).find("h2.mg-chart-title");if(t.title&&t.title!==r.text()){if(r.remove(),t.target&&t.title){var a,n=t.description?'<i class="fa fa-question-circle fa-inverse"></i>':"";e(t.target).prepend('<h2 class="mg-chart-title">'+t.title+n+"</h2>"),t.description&&(a=e(t.target).find("h2.mg-chart-title"),a.popover({html:!0,animation:!1,content:t.description,trigger:"hover",placement:"top",container:a}))}t.error&&w(t)}}function a(r){for(var a=t.select(e(r.target).find("svg").get(0)),n="point"==r.chart_type?r.buffer/2:2*r.buffer/3,s=[],o=0;o<r.data.length;o++)for(var i=0;i<r.data[o].length;i++)s.push(r.data[o][i]);var l=a.selectAll("line.mg-y-rug").data(s);l.enter().append("svg:line").attr("class","mg-y-rug").attr("opacity",.3),l.exit().remove(),l.exit().remove(),l.attr("x1",r.left+1).attr("x2",r.left+n).attr("y1",r.scalefns.yf).attr("y2",r.scalefns.yf),r.color_accessor?(l.attr("stroke",r.scalefns.color),l.classed("mg-y-rug-mono",!1)):(l.attr("stroke",null),l.classed("mg-y-rug-mono",!0))}function n(r){function n(t){return 1e3==t?3:1e6==t?7:Math.log(t)/Math.LN10}var s,o,i,l=t.select(e(r.target).find("svg").get(0)),c=e(e(r.target).find("svg").get(0));r.scalefns.yf=function(t){return r.scales.Y(t[r.y_accessor])};for(var o,i,u=!1,f=0;f<r.data.length;f++){var d=r.data[f];if("log"==r.y_scale_type&&(d=d.filter(function(t){return t[r.y_accessor]>0})),d.length>0){var h=t.extent(d,function(t){return t[r.y_accessor]});u?(o=Math.min(h[0],o),i=Math.max(h[1],i)):(o=h[0],i=h[1],u=!0)}}o>=0&&!r.min_y&&!r.min_y_from_data&&(o=0),"bar"==r.chart_type&&(o=0,i=t.max(r.data[0],function(t){var e=[];return e.push(t[r.y_accessor]),null!=r.baseline_accessor&&e.push(t[r.baseline_accessor]),null!=r.predictor_accessor&&e.push(t[r.predictor_accessor]),Math.max.apply(null,e)})),o=r.min_y?r.min_y:o,i=r.max_y?r.max_y:i*r.inflator,"log"!=r.y_scale_type&&(o>=0?r.y_axis_negative=!1:(o-=i*(r.inflator-1),r.y_axis_negative=!0)),!r.min_y&&r.min_y_from_data&&(o/=r.inflator),"log"==r.y_scale_type?("histogram"==r.chart_type?o=.2:0>=o&&(o=1),r.scales.Y=t.scale.log().domain([o,i]).range([r.height-r.bottom-r.buffer,r.top]).clamp(!0)):r.scales.Y=t.scale.linear().domain([o,i]).range([r.height-r.bottom-r.buffer,r.top]),r.scales.Y_axis=t.scale.linear().domain([o,i]).range([r.height-r.bottom-r.buffer,r.top]);var p=r.yax_format;if(p||(p="count"==r.format?function(e){if(1>e)return r.yax_units+t.round(e,r.decimals);var a=t.formatPrefix(e);return r.yax_units+a.scale(e)+a.symbol}:function(e){var r=t.format("%p");return r(e)}),c.find(".mg-y-axis").remove(),!r.y_axis)return this;s=l.append("g").classed("mg-y-axis",!0).classed("mg-y-axis-small",r.use_small_class),r.y_label&&s.append("text").attr("class","label").attr("x",function(){return-1*(r.top+r.buffer+(r.height-r.bottom-r.buffer-(r.top+r.buffer))/2)}).attr("y",function(){return r.left/2}).attr("dy","0.4em").attr("text-anchor","middle").text(function(){return r.y_label}).attr("transform",function(){return"rotate(-90)"});var g=r.scales.Y.ticks(r.yax_count);"log"==r.y_scale_type&&(g=g.filter(function(t){return Math.abs(n(t))%1<1e-6||Math.abs(n(t))%1>1-1e-6}));var m=r.scales.Y.ticks(r.yax_count).length,v=!0;e.each(r.data,function(t,a){e.each(a,function(t,e){return e[r.y_accessor]%1!==0?(v=!1,!1):void 0})}),v&&m>i&&"count"==r.format&&(g=g.filter(function(t){return t%1===0}));var _=g.length-1;return r.x_extended_ticks||r.y_extended_ticks||s.append("line").attr("x1",r.left).attr("x2",r.left).attr("y1",r.scales.Y(g[0]).toFixed(2)).attr("y2",r.scales.Y(g[_]).toFixed(2)),s.selectAll(".mg-yax-ticks").data(g).enter().append("line").classed("mg-extended-y-ticks",r.y_extended_ticks).attr("x1",r.left).attr("x2",function(){return r.y_extended_ticks?r.width-r.right:r.left-r.yax_tick_length}).attr("y1",function(t){return r.scales.Y(t).toFixed(2)}).attr("y2",function(t){return r.scales.Y(t).toFixed(2)}),s.selectAll(".mg-yax-labels").data(g).enter().append("text").attr("x",r.left-3*r.yax_tick_length/2).attr("dx",-3).attr("y",function(t){return r.scales.Y(t).toFixed(2)}).attr("dy",".35em").attr("text-anchor","end").text(function(t){var e=p(t);return e}),r.y_rug&&a(r),this}function s(r){r.height;r.scales.Y=t.scale.ordinal().domain(r.categorical_variables).rangeRoundBands([r.height-r.bottom-r.buffer,r.top],r.padding_percentage,r.outer_padding_percentage),r.scalefns.yf=function(t){return r.scales.Y(t[r.y_accessor])};var a=t.select(e(r.target).find("svg").get(0)),n=e(e(r.target).find("svg").get(0));n.find(".mg-y-axis").remove();var s=a.append("g").classed("mg-y-axis",!0).classed("mg-y-axis-small",r.use_small_class);return r.y_axis?(s.selectAll("text").data(r.categorical_variables).enter().append("svg:text").attr("x",r.left).attr("y",function(t){return r.scales.Y(t)+r.scales.Y.rangeBand()/2+r.buffer*r.outer_padding_percentage}).attr("dy",".35em").attr("text-anchor","end").text(String),this):this}function o(r){for(var a="point"==r.chart_type?r.buffer/2:r.buffer,n=t.select(e(r.target).find("svg").get(0)),s=[],o=0;o<r.data.length;o++)for(var i=0;i<r.data[o].length;i++)s.push(r.data[o][i]);var l=n.selectAll("line.mg-x-rug").data(s);l.enter().append("svg:line").attr("class","mg-x-rug").attr("opacity",.3),l.exit().remove(),l.exit().remove(),l.attr("x1",r.scalefns.xf).attr("x2",r.scalefns.xf).attr("y1",r.height-r.top+a).attr("y2",r.height-r.top),r.color_accessor?(l.attr("stroke",r.scalefns.color),l.classed("mg-x-rug-mono",!1)):(l.attr("stroke",null),l.classed("mg-x-rug-mono",!0))}function i(r){var a,n,s,i=t.select(e(r.target).find("svg").get(0)),l=e(e(r.target).find("svg").get(0));if(r.scalefns.xf=function(t){return r.scales.X(t[r.x_accessor])},"point"==r.chart_type){var c,u,f,d,h,p,g,m;null!=r.color_accessor&&(null==r.color_domain?"number"==r.color_type?(f=t.min(r.data[0],function(t){return t[r.color_accessor]}),d=t.max(r.data[0],function(t){return t[r.color_accessor]}),m=[f,d]):"category"==r.color_type&&(m=t.set(r.data[0].map(function(t){return t[r.color_accessor]})).values(),m.sort()):m=r.color_domain,p=null==r.color_range?"number"==r.color_type?["blue","red"]:null:r.color_range,"number"==r.color_type?r.scales.color=t.scale.linear().domain(m).range(p).clamp(!0):(r.scales.color=null!=r.color_range?t.scale.ordinal().range(p):m.length>10?t.scale.category20():t.scale.category10(),r.scales.color.domain(m)),r.scalefns.color=function(t){return r.scales.color(t[r.color_accessor])}),null!=r.size_accessor&&(null==r.size_domain?(c=t.min(r.data[0],function(t){return t[r.size_accessor]}),u=t.max(r.data[0],function(t){return t[r.size_accessor]}),g=[c,u]):g=r.size_domain,h=null==r.size_range?[1,5]:r.size_range,r.scales.size=t.scale.linear().domain(g).range(h).clamp(!0),r.scalefns.size=function(t){return r.scales.size(t[r.size_accessor])})}var v;if("line"==r.chart_type)for(var _=0;_<r.data.length;_++)v=r.data[_].length-1,(r.data[_][0][r.x_accessor]<n||!n)&&(n=r.data[_][0][r.x_accessor]),(r.data[_][v][r.x_accessor]>s||!s)&&(s=r.data[_][v][r.x_accessor]);else"point"==r.chart_type?(s=t.max(r.data[0],function(t){return t[r.x_accessor]}),n=t.min(r.data[0],function(t){return t[r.x_accessor]})):"histogram"==r.chart_type?(n=t.min(r.data[0],function(t){return t[r.x_accessor]}),s=t.max(r.data[0],function(t){return t[r.x_accessor]}),r.xax_format=function(e){if(1>e)return r.yax_units+t.round(e,r.decimals);var a=t.formatPrefix(e);return r.xax_units+a.scale(e)+a.symbol}):"bar"==r.chart_type&&(n=0,s=t.max(r.data[0],function(t){var e=[];return e.push(t[r.x_accessor]),null!=r.baseline_accessor&&e.push(t[r.baseline_accessor]),null!=r.predictor_accessor&&e.push(t[r.predictor_accessor]),Math.max.apply(null,e)}),r.xax_format=function(e){if(1>e)return r.yax_units+t.round(e,r.decimals);var a=t.formatPrefix(e);return r.xax_units+a.scale(e)+a.symbol});if(n==s){if(n instanceof Date){var x=k.clone(n).setDate(n.getDate()-1),y=k.clone(n).setDate(n.getDate()+1);n=x,s=y}else"number"==typeof n?(n-=1,s+=1):"string"==typeof n&&(n=Number(n)-1,s=Number(s)+1);r.xax_count=2}n=r.min_x?r.min_x:n,s=r.max_x?r.max_x:s,r.x_axis_negative=!1,r.time_series||0>n&&(n-=s*(r.inflator-1),r.x_axis_negative=!0);var b;if(b="bar"==r.chart_type?5*r.buffer:0,r.scales.X=r.time_series?t.time.scale():t.scale.linear(),r.scales.X.domain([n,s]).range([r.left+r.buffer,r.width-r.right-r.buffer-b]),l.find(".mg-x-axis").remove(),!r.x_axis)return this;a=i.append("g").classed("mg-x-axis",!0).classed("mg-x-axis-small",r.use_small_class);var v=r.scales.X.ticks(r.xax_count).length-1;if(r.x_label&&a.append("text").attr("class","label").attr("x",function(){return r.left+r.buffer+(r.width-r.right-r.buffer-(r.left+r.buffer))/2}).attr("y",(r.height-r.bottom/2).toFixed(2)).attr("dy",".50em").attr("text-anchor","middle").text(function(){return r.x_label}),"bar"==r.chart_type||r.x_extended_ticks||r.y_extended_ticks||a.append("line").attr("x1",0==r.concise||0==r.xax_count?r.left+r.buffer:r.scales.X(r.scales.X.ticks(r.xax_count)[0]).toFixed(2)).attr("x2",0==r.concise||0==r.xax_count?r.width-r.right-r.buffer:r.scales.X(r.scales.X.ticks(r.xax_count)[v]).toFixed(2)).attr("y1",r.height-r.bottom).attr("y2",r.height-r.bottom),a.selectAll(".mg-xax-ticks").data(r.scales.X.ticks(r.xax_count)).enter().append("line").attr("x1",function(t){return r.scales.X(t).toFixed(2)}).attr("x2",function(t){return r.scales.X(t).toFixed(2)}).attr("y1",r.height-r.bottom).attr("y2",function(){return r.x_extended_ticks?r.top:r.height-r.bottom+r.xax_tick_length}).attr("class",function(){return r.x_extended_ticks?"mg-extended-x-ticks":void 0}),a.selectAll(".mg-xax-labels").data(r.scales.X.ticks(r.xax_count)).enter().append("text").attr("x",function(t){return r.scales.X(t).toFixed(2)}).attr("y",(r.height-r.bottom+7*r.xax_tick_length/3).toFixed(2)).attr("dy",".50em").attr("text-anchor","middle").text(function(t){return r.xax_units+r.xax_format(t)}),r.time_series&&r.show_years){for(var n,s,_=0;_<r.data.length;_++)v=r.data[_].length-1,(r.data[_][0][r.x_accessor]<n||!n)&&(n=r.data[_][0][r.x_accessor]),(r.data[_][v][r.x_accessor]>s||!s)&&(s=r.data[_][v][r.x_accessor]);var w=t.time.years(n,s);if(0==w.length){var A=r.scales.X.ticks(r.xax_count)[0];w=[A]}a=a.append("g").classed("mg-year-marker",!0).classed("mg-year-marker-small",r.use_small_class),a.selectAll(".mg-year-marker").data(w).enter().append("line").attr("x1",function(t){return r.scales.X(t).toFixed(2)}).attr("x2",function(t){return r.scales.X(t).toFixed(2)}).attr("y1",r.top).attr("y2",r.height-r.bottom);var D=t.time.format("%Y");a.selectAll(".mg-year-marker").data(w).enter().append("text").attr("x",function(t){return r.scales.X(t).toFixed(2)}).attr("y",(r.height-r.bottom+7*r.xax_tick_length/1.3).toFixed(2)).attr("dy",r.use_small_class?-3:0).attr("text-anchor","middle").text(function(t){return D(t)})}return r.x_rug&&o(r),this}function l(r){var a=(r.width,0);"bar"==r.chart_type&&(a=r.buffer+5),r.scales.X=t.scale.ordinal().domain(r.categorical_variables.reverse()).rangeRoundBands([r.left,r.width-r.right-r.buffer-a]),r.scalefns.xf=function(t){return r.scales.X(t[r.x_accessor])};var n=t.select(e(r.target).find("svg").get(0)),s=e(e(r.target).find("svg").get(0));s.find(".mg-x-axis").remove();var o=n.append("g").classed("mg-x-axis",!0).classed("mg-x-axis-small",r.use_small_class);if(!r.x_axis)return this;var i=o.selectAll("text").data(r.categorical_variables).enter().append("svg:text");return i.attr("x",function(t){return r.scales.X(t)+r.scales.X.rangeBand()/2+r.buffer*r.outer_padding_percentage+a/2}).attr("y",r.height-r.bottom+r.buffer).attr("dy",".35em").attr("text-anchor","middle").text(String),i.each(function(t){var e=this,a=r.scales.X.rangeBand();b(e,t,a)}),this}function c(a){var n={target:null,title:null,description:null},a=arguments[0];a||(a={}),a=_(a,n),a.time_series="date"==e.type(a.data[0][0][a.x_accessor])?!0:!1;var s=a.width,o=a.height;"bar"==a.chart_type&&null==o&&(o=a.height=a.data[0].length*a.bar_height+a.top+a.bottom);var i=e(a.target).find("svg");(i.find(".mg-main-line").length>0&&"line"!=a.chart_type||i.find(".mg-points").length>0&&"point"!=a.chart_type||i.find(".mg-histogram").length>0&&"histogram"!=a.chart_type||i.find(".mg-barplot").length>0&&"bar"!=a.chart_type)&&e(a.target).empty(),""==e.trim(e(a.target).html())&&t.select(a.target).append("svg").classed("linked",a.linked).attr("width",s).attr("height",o);var i=t.select(a.target).selectAll("svg");if(a.width!=Number(i.attr("width"))&&i.attr("width",a.width),a.height!=Number(i.attr("height"))&&i.attr("height",a.height),i.classed("mg-missing",!1),i.selectAll(".mg-missing-text").remove(),r(a),a.use_small_class=a.height-a.top-a.bottom-a.buffer<=a.small_height_threshold&&a.width-a.left-a.right-2*a.buffer<=a.small_width_threshold||a.small_text,a.data.length<e(a.target).find("svg .mg-main-line").length)if(a.custom_line_color_map.length>0)for(var l=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=r+1;return e},c=x(l(a.max_data_size),a.custom_line_color_map),u=0;u<c.length;u++)e(a.target).find("svg .mg-main-line.mg-line"+c[u]+"-color").remove();else for(var f=a.data.length,d=e(a.target).find("svg .mg-main-line").length,u=d;u>f;u--)e(a.target).find("svg .mg-main-line.mg-line"+u+"-color").remove();return this}function u(r){var a,n,s=t.select(e(r.target).find("svg").get(0));return r.markers&&(e(r.target).find("svg .mg-markers").remove(),a=s.append("g").attr("class","mg-markers"),a.selectAll(".mg-markers").data(r.markers.filter(function(t){return r.scales.X(t[r.x_accessor])>r.buffer+r.left&&r.scales.X(t[r.x_accessor])<r.width-r.buffer-r.right})).enter().append("line").attr("x1",function(t){return r.scales.X(t[r.x_accessor]).toFixed(2)}).attr("x2",function(t){return r.scales.X(t[r.x_accessor]).toFixed(2)}).attr("y1",r.top).attr("y2",function(){return r.height-r.bottom-r.buffer}).attr("stroke-dasharray","3,1"),a.selectAll(".mg-markers").data(r.markers.filter(function(t){return r.scales.X(t[r.x_accessor])>r.buffer+r.left&&r.scales.X(t[r.x_accessor])<r.width-r.buffer-r.right})).enter().append("text").attr("x",function(t){return r.scales.X(t[r.x_accessor])}).attr("y",r.top-8).attr("text-anchor","middle").text(function(t){return t.label})),r.baselines&&(s.selectAll(".mg-baselines").remove(),n=s.append("g").attr("class","mg-baselines"),n.selectAll(".mg-baselines").data(r.baselines).enter().append("line").attr("x1",r.left+r.buffer).attr("x2",r.width-r.right-r.buffer).attr("y1",function(t){return r.scales.Y(t.value).toFixed(2)}).attr("y2",function(t){return r.scales.Y(t.value).toFixed(2)}),n.selectAll(".mg-baselines").data(r.baselines).enter().append("text").attr("x",r.width-r.right-r.buffer).attr("y",function(t){return r.scales.Y(t.value).toFixed(2)}).attr("dy",-3).attr("text-anchor","end").text(function(t){return t.label})),this}function f(t){if("line"==t.chart_type){var e=t.data[0]instanceof Object&&!(t.data[0]instanceof Array),r=t.data[0]instanceof Array&&!(t.data[0][0]instanceof Object&&!(t.data[0][0]instanceof Date));(e||r)&&(t.data=[t.data])}else t.data[0]instanceof Array||(t.data=[t.data]);if(t.y_accessor instanceof Array&&(t.data=t.data.map(function(e){return t.y_accessor.map(function(t){return e.map(function(e){return e=k.clone(e),void 0==e[t]?void 0:(e.multiline_y_accessor=e[t],e)}).filter(function(t){return void 0!=t})})})[0],t.y_accessor="multiline_y_accessor"),"line"==t.chart_type)for(var a=0;a<t.data.length;a++)t.data[a].sort(function(e,r){return e[t.x_accessor]-r[t.x_accessor]});return this}function d(t){var r="date"==e.type(t.data[0][0][t.x_accessor])?!0:!1;if(t.missing_is_zero&&"line"==t.chart_type&&r)for(var a=0;a<t.data.length;a++){for(var n=t.data[a][0],s=t.data[a][t.data[a].length-1],o=[],i=k.clone(n[t.x_accessor]).setDate(n[t.x_accessor].getDate()+1),l=t.min_x?t.min_x:i,c=t.max_x?t.max_x:s[t.x_accessor],u=new Date(l);c>=u;u.setDate(u.getDate()+1)){var f={};u.setHours(0,0,0,0),Date.parse(u)==Date.parse(new Date(i))&&o.push(k.clone(t.data[a][0]));var d=null;e.each(t.data[a],function(t,e){return Date.parse(e.date)==Date.parse(new Date(u))?(d=e,!1):void 0}),d?o.push(d):(f[t.x_accessor]=new Date(u),f[t.y_accessor]=0,o.push(f)),Date.parse(u)==Date.parse(new Date(s[t.x_accessor]))&&o.push(s)}t.data[a]=o}return this}function h(e){var r,a=e.data[0];if(0==e.binned){if("object"==typeof a[0])r=a.map(function(t){return t[e.x_accessor]});else{if("number"!=typeof a[0])return void console.log("TypeError: expected an array of numbers, found "+typeof a[0]);r=a}var n=t.layout.histogram();e.bins&&(n=n.bins(e.bins)),e.processed_data=n(r).map(function(t){return{x:t.x,y:t.y,dx:t.dx}})}else{e.processed_data=a.map(function(t){return{x:t[e.x_accessor],y:t[e.y_accessor]}});for(var s,o,i=0;i<e.processed_data.length;i++)s=e.processed_data[i],i==e.processed_data.length-1?s.dx=e.processed_data[i-1].dx:(o=e.processed_data[i+1],s.dx=o.x-s.x)}return e.data=[e.processed_data],e.x_accessor=e.processed_x_accessor,e.y_accessor=e.processed_y_accessor,this}function p(e){var r,a={},n=e.data[0],s="vertical"===e.bar_orientation?e.x_accessor:e.y_accessor,o="vertical"===e.bar_orientation?e.y_accessor:e.x_accessor;if(e.categorical_variables=[],0==e.binned){r="object"==typeof n[0]?n.map(function(t){return t[s]}):n;for(var i,l=0;l<r.length;l++)i=r[l],-1==e.categorical_variables.indexOf(i)&&e.categorical_variables.push(i),a.hasOwnProperty(i)||(a[i]=0),a[i]+=1;a=Object.keys(a).map(function(t){var e={};return e[o]=a[t],e[s]=t,e})}else a=n,e.categorical_variables=t.set(a.map(function(t){return t[s]})).values(),e.categorical_variables.reverse();return e.data=[a],this}function g(t){var e=t.data[0],r=e.map(function(e){return e[t.x_accessor]}),a=e.map(function(e){return e[t.y_accessor]});return t.least_squares&&(t.ls_line=v(r,a)),this}function m(r){var a=t.select(e(r.target).find("svg").get(0)),n=(r.data[0],r.scales.X.ticks(r.xax_count)[0]),s=r.scales.X.ticks(r.xax_count)[r.scales.X.ticks(r.xax_count).length-1];a.append("svg:line").attr("x1",r.scales.X(n)).attr("x2",r.scales.X(s)).attr("y1",r.scales.Y(r.ls_line.fit(n))).attr("y2",r.scales.Y(r.ls_line.fit(s))).attr("class","mg-least-squares-line")}function v(e,r){{var a,n,s,o;e.length}a=e[0]instanceof Date?e.map(function(t){return t.getTime()}):e,n=r[0]instanceof Date?r.map(function(t){return t.getTime()}):r;for(var s,o,i=t.mean(a),l=t.mean(n),c=0,u=0,f=0;f<a.length;f++)s=a[f],o=n[f],c+=(s-i)*(o-l),u+=(s-i)*(s-i);var d=c/u,h=l-d*i;return{x0:h,beta:d,fit:function(t){return h+t*d}}}function _(t){return D(Array.prototype.slice.call(arguments,1),function(e){if(e)for(var r in e)void 0===t[r]&&(t[r]=e[r])}),t}function x(t,e){for(var r=[],a=[],n=0;n<e.length;n++)r[e[n]]=!0;for(var n=0;n<t.length;n++)r[t[n]]||a.push(t[n]);return a}function y(t,e){console.warn("Deprecation: "+t+(e?". This feature will be removed in "+e+".":" the near future.")),console.trace()}function b(t,e,r){var a,n=0;for(t.textContent=e,a=t.getBBox();a.width>r&&(t.textContent=e.slice(0,--n)+"...",a=t.getBBox(),"..."!==t.textContent););}function w(t){var r='<i class="fa fa-x fa-exclamation-circle warning"></i>';console.log("ERROR : ",t.target," : ",t.error),e(t.target).find(".mg-chart-title").append(r)}var k={version:"2.0.0"},A={};if(k.globals={},k.deprecations={rollover_callback:{replacement:"mouseover",version:"2.0"},rollout_callback:{replacement:"mouseout",version:"2.0"}},k.globals.link=!1,k.globals.version="1.1",k.data_graphic=function(){var r={};r.all={missing_is_zero:!1,legend:"",legend_target:"",error:"",animate_on_load:!1,top:40,bottom:30,right:10,left:50,buffer:8,width:350,height:220,small_height_threshold:120,small_width_threshold:160,small_text:!1,xax_count:6,xax_tick_length:5,yax_count:5,yax_tick_length:5,x_extended_ticks:!1,y_extended_ticks:!1,y_scale_type:"linear",max_x:null,max_y:null,min_x:null,min_y:null,min_y_from_data:!1,point_size:2.5,x_accessor:"date",xax_units:"",x_label:"",x_axis:!0,y_axis:!0,y_accessor:"value",y_label:"",yax_units:"",x_rug:!1,y_rug:!1,transition_on_update:!0,mouseover:null,show_rollover_text:!0,show_confidence_band:null,xax_format:function(r){var n=t.time.format("%b %d"),s=t.formatPrefix(r);switch(e.type(a.data[0][0][a.x_accessor])){case"date":return n(r);case"number":return s.scale(r)+s.symbol;default:return r}},area:!0,chart_type:"line",data:[],decimals:2,format:"count",inflator:10/9,linked:!1,list:!1,baselines:null,markers:null,scalefns:{},scales:{},show_years:!0,target:"#viz",interpolate:"cardinal",custom_line_color_map:[],max_data_size:null},r.point={buffer:16,ls:!1,lowess:!1,point_size:2.5,size_accessor:null,color_accessor:null,size_range:null,color_range:null,size_domain:null,color_domain:null,color_type:"number"},r.histogram={mouseover:function(t){e("#histogram svg .mg-active-datapoint").html("Frequency Count: "+t.y)},binned:!1,bins:null,processed_x_accessor:"x",processed_y_accessor:"y",processed_dx_accessor:"dx",bar_margin:1},r.bar={y_accessor:"factor",x_accessor:"value",baseline_accessor:null,predictor_accessor:null,predictor_proportion:5,dodge_accessor:null,binned:!0,padding_percentage:0,outer_padding_percentage:.1,height:500,top:20,bar_height:20,left:70},r.missing={top:0,bottom:0,right:0,left:0,legend_target:"",width:350,height:220,missing_text:"Data currently missing or unavailable"};var a=arguments[0];a||(a={});a.list&&(a.x_accessor=0,a.y_accessor=1);for(var n in k.deprecations)if(a.hasOwnProperty(n)){var s=k.deprecations[n],o="Use of `args."+n+"` has been deprecated",i=s.replacement;if(i&&(a[i]?o+=". The replacement - `args."+i+"` - has already been defined. This definition will be discarded.":a[i]=a[n]),s.warned)continue;s.warned=!0,i&&(o+=" in favor of `args."+i+"`"),y(o,s.version)}if("missing-data"==a.chart_type)a=_(a,r.missing),A.missing(a);else if("point"==a.chart_type){var l=_(r.point,r.all);a=_(a,l),A.point(a).mainPlot().markers().rollover()}else if("histogram"==a.chart_type){var l=_(r.histogram,r.all);a=_(a,l),A.histogram(a).mainPlot().markers().rollover()}else if("bar"==a.chart_type){var l=_(r.bar,r.all);a=_(a,l),A.bar(a).mainPlot().markers().rollover()}else a=_(a,r.all),A.line(a).markers().mainPlot().rollover();return a.data},"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){function e(e){return this.each(function(){var a=t(this),n=a.data("bs.tooltip"),s="object"==typeof e&&e,o=s&&s.selector;(n||"destroy"!=e)&&(o?(n||a.data("bs.tooltip",n={}),n[o]||(n[o]=new r(this,s))):n||a.data("bs.tooltip",n=new r(this,s)),"string"==typeof e&&n[e]())})}if("function"==typeof t().tooltip)return!0;var r=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};r.VERSION="3.3.1",r.TRANSITION_DURATION=150,r.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},r.prototype.init=function(e,r,a){this.enabled=!0,this.type=e,this.$element=t(r),this.options=this.getOptions(a),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var n=this.options.trigger.split(" "),s=n.length;s--;){var o=n[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var i="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(i+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},r.prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},r.prototype.getDelegateOptions=function(){var e={},r=this.getDefaults();return this._options&&t.each(this._options,function(t,a){r[t]!=a&&(e[t]=a)}),e},r.prototype.enter=function(e){var r=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return r&&r.$tip&&r.$tip.is(":visible")?void(r.hoverState="in"):(r||(r=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,r)),clearTimeout(r.timeout),r.hoverState="in",r.options.delay&&r.options.delay.show?void(r.timeout=setTimeout(function(){"in"==r.hoverState&&r.show()},r.options.delay.show)):r.show())},r.prototype.leave=function(e){var r=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return r||(r=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,r)),clearTimeout(r.timeout),r.hoverState="out",r.options.delay&&r.options.delay.hide?void(r.timeout=setTimeout(function(){"out"==r.hoverState&&r.hide()},r.options.delay.hide)):r.hide()},r.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var a=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!a)return;var n=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(i);c&&(i=i.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var u=this.getPosition(),f=s[0].offsetWidth,d=s[0].offsetHeight;if(c){var h=i,p=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(p);i="bottom"==i&&u.bottom+d>g.bottom?"top":"top"==i&&u.top-d<g.top?"bottom":"right"==i&&u.right+f>g.width?"left":"left"==i&&u.left-f<g.left?"right":i,s.removeClass(h).addClass(i)}var m=this.getCalculatedOffset(i,u,f,d);this.applyPlacement(m,i);var v=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(r.TRANSITION_DURATION):v()}},r.prototype.applyPlacement=function(e,r){var a=this.tip(),n=a[0].offsetWidth,s=a[0].offsetHeight,o=parseInt(a.css("margin-top"),10),i=parseInt(a.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(i)&&(i=0),e.top=e.top+o,e.left=e.left+i,t.offset.setOffset(a[0],t.extend({using:function(t){a.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),a.addClass("in");var l=a[0].offsetWidth,c=a[0].offsetHeight;"top"==r&&c!=s&&(e.top=e.top+s-c);var u=this.getViewportAdjustedDelta(r,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var f=/top|bottom/.test(r),d=f?2*u.left-n+l:2*u.top-s+c,h=f?"offsetWidth":"offsetHeight";a.offset(e),this.replaceArrow(d,a[0][h],f)},r.prototype.replaceArrow=function(t,e,r){this.arrow().css(r?"left":"top",50*(1-t/e)+"%").css(r?"top":"left","")},r.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},r.prototype.hide=function(e){function a(){"in"!=n.hoverState&&s.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=this.tip(),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",a).emulateTransitionEnd(r.TRANSITION_DURATION):a(),this.hoverState=null,this)},r.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},r.prototype.hasContent=function(){return this.getTitle()},r.prototype.getPosition=function(e){e=e||this.$element;var r=e[0],a="BODY"==r.tagName,n=r.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=a?{top:0,left:0}:e.offset(),o={scroll:a?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},i=a?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,o,i,s)},r.prototype.getCalculatedOffset=function(t,e,r,a){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-r/2}:"top"==t?{top:e.top-a,left:e.left+e.width/2-r/2}:"left"==t?{top:e.top+e.height/2-a/2,left:e.left-r}:{top:e.top+e.height/2-a/2,left:e.left+e.width}},r.prototype.getViewportAdjustedDelta=function(t,e,r,a){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var i=e.top-s-o.scroll,l=e.top+s-o.scroll+a;i<o.top?n.top=o.top-i:l>o.top+o.height&&(n.top=o.top+o.height-l)}else{var c=e.left-s,u=e.left+s+r;c<o.left?n.left=o.left-c:u>o.width&&(n.left=o.left+o.width-u)}return n},r.prototype.getTitle=function(){var t,e=this.$element,r=this.options;return t=e.attr("data-original-title")||("function"==typeof r.title?r.title.call(e[0]):r.title)},r.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},r.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},r.prototype.enable=function(){this.enabled=!0},r.prototype.disable=function(){this.enabled=!1},r.prototype.toggleEnabled=function(){this.enabled=!this.enabled},r.prototype.toggle=function(e){var r=this;e&&(r=t(e.currentTarget).data("bs."+this.type),r||(r=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,r))),r.tip().hasClass("in")?r.leave(r):r.enter(r)},r.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var a=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=r,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=a,this}}(jQuery),+function(t){function e(e){return this.each(function(){var a=t(this),n=a.data("bs.popover"),s="object"==typeof e&&e,o=s&&s.selector;(n||"destroy"!=e)&&(o?(n||a.data("bs.popover",n={}),n[o]||(n[o]=new r(this,s))):n||a.data("bs.popover",n=new r(this,s)),"string"==typeof e&&n[e]())})}if("function"==typeof t().popover)return!0;var r=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");r.VERSION="3.3.1",r.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),r.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),r.prototype.constructor=r,r.prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),r=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof r?"html":"append":"text"](r),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},r.prototype.hasContent=function(){return this.getTitle()||this.getContent()},r.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")
},r.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var a=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=r,t.fn.popover.noConflict=function(){return t.fn.popover=a,this}}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){function e(e){e&&3===e.which||(t(n).remove(),t(s).each(function(){var a=t(this),n=r(a),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||(a.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function r(e){var r=e.attr("data-target");r||(r=e.attr("href"),r=r&&/#[A-Za-z]/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,""));var a=r&&t(r);return a&&a.length?a:e.parent()}function a(e){return this.each(function(){var r=t(this),a=r.data("bs.dropdown");a||r.data("bs.dropdown",a=new o(this)),"string"==typeof e&&a[e].call(r)})}if("function"==typeof t().dropdown)return!0;var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.1",o.prototype.toggle=function(a){var n=t(this);if(!n.is(".disabled, :disabled")){var s=r(n),o=s.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var i={relatedTarget:this};if(s.trigger(a=t.Event("show.bs.dropdown",i)),a.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",i)}return!1}},o.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var a=t(this);if(e.preventDefault(),e.stopPropagation(),!a.is(".disabled, :disabled")){var n=r(a),o=n.hasClass("open");if(!o&&27!=e.which||o&&27==e.which)return 27==e.which&&n.find(s).trigger("focus"),a.trigger("click");var i=" li:not(.divider):visible a",l=n.find('[role="menu"]'+i+', [role="listbox"]'+i);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var i=t.fn.dropdown;t.fn.dropdown=a,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=i,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),k.button_layout=function(t){return this.target=t,this.feature_set={},this.public_name={},this.sorters={},this.manual=[],this.manual_map={},this.manual_callback={},this._strip_punctuation=function(t){var e=t.replace(/[^a-zA-Z0-9 _]+/g,""),r=e.replace(/ +?/g,"");return r},this.data=function(t){return this._data=t,this},this.manual_button=function(t,e,r){return this.feature_set[t]=e,this.manual_map[this._strip_punctuation(t)]=t,this.manual_callback[t]=r,this},this.button=function(t){return arguments.length>1&&(this.public_name[t]=arguments[1]),arguments.length>2&&(this.sorters[t]=arguments[2]),this.feature_set[t]=[],this},this.callback=function(t){return this._callback=t,this},this.display=function(){var t,r,a,n,s=this._callback,o=this.manual_callback,i=this.manual_map;a=Object.keys(this.feature_set);for(var l=0;l<this._data.length;l++){t=this._data[l],r=a.map(function(e){return t[e]});for(var c=0;c<a.length;c++)n=a[c],-1==this.feature_set[n].indexOf(r[c])&&this.feature_set[n].push(r[c])}for(var n in this.feature_set)this.sorters.hasOwnProperty(n)&&this.feature_set[n].sort(this.sorters[n]);e(this.target).empty(),e(this.target).append("<div class='col-lg-12 segments text-center'></div>");for(var u in this.feature_set){a=this.feature_set[u],e(this.target+" div.segments").append('<div class="btn-group '+this._strip_punctuation(u)+'-btns text-left"><button type="button" class="btn btn-default btn-lg dropdown-toggle" data-toggle="dropdown"><span class=\'which-button\'>'+(this.public_name.hasOwnProperty(u)?this.public_name[u]:u)+"</span><span class='title'>"+(this.manual_callback.hasOwnProperty(u)?this.feature_set[u][0]:"all")+'</span><span class="caret"></span></button><ul class="dropdown-menu" role="menu">'+(this.manual_callback.hasOwnProperty(u)?"":'<li><a href="#" data-feature="'+u+'" data-key="all">All</a></li>')+(this.manual_callback.hasOwnProperty(u)?"":'<li class="divider"></li>')+"</ul></div>");for(var l=0;l<a.length;l++)"all"!=a[l]&&void 0!=a[l]&&e(this.target+" div."+this._strip_punctuation(u)+"-btns ul.dropdown-menu").append('<li><a href="#" data-feature="'+this._strip_punctuation(u)+'" data-key="'+a[l]+'">'+a[l]+"</a></li>");e("."+this._strip_punctuation(u)+"-btns .dropdown-menu li a").on("click",function(){var t,r=e(this).data("key"),a=e(this).data("feature");return e("."+a+"-btns button.btn span.title").html(r),i.hasOwnProperty(a)?(t=i[a],o[t](r)):s(a,r),!1})}return this},this},A.line=function(r){return this.args=r,this.init=function(t){return f(t),d(t),c(t),i(t),n(t),this},this.mainPlot=function(){var a,n=t.select(e(r.target).find("svg").get(0)),s=0,o=t.svg.area().x(r.scalefns.xf).y0(r.scales.Y.range()[0]).y1(r.scalefns.yf).interpolate(r.interpolate),i=e(r.target).find("svg path.mg-confidence-band");if(i.length>0&&i.remove(),r.show_confidence_band)var a=t.svg.area().x(r.scalefns.xf).y0(function(t){var e=r.show_confidence_band[0];return r.scales.Y(t[e])}).y1(function(t){var e=r.show_confidence_band[1];return r.scales.Y(t[e])}).interpolate(r.interpolate);for(var l,c=t.svg.line().x(r.scalefns.xf).y(r.scalefns.yf).interpolate(r.interpolate),u=t.svg.line().x(r.scalefns.xf).y(function(){return r.scales.Y(s)}).interpolate(r.interpolate),f="",d=r.data.length-1;d>=0;d--){l=r.data[d];var h=d+1;r.custom_line_color_map.length>0&&(h=r.custom_line_color_map[d]),r.show_confidence_band&&n.append("path").attr("class","mg-confidence-band").attr("d",a(r.data[d]));var p=e(r.target).find("svg path.mg-area"+h+"-color");r.area&&!r.use_data_y_min&&!r.y_axis_negative&&r.data.length<=1?p.length>0?(e(n.node()).find(".mg-y-axis").after(p.detach()),t.select(p.get(0)).transition().duration(function(){return r.transition_on_update?1e3:0}).attr("d",o(r.data[d]))):n.append("path").attr("class","mg-main-area mg-area"+h+"-color").attr("d",o(r.data[d])):p.length>0&&p.remove();var g=e(r.target).find("svg path.mg-main-line.mg-line"+h+"-color").first();g.length>0?(e(n.node()).find(".mg-y-axis").after(g.detach()),t.select(g.get(0)).transition().duration(function(){return r.transition_on_update?1e3:0}).attr("d",c(r.data[d]))):r.animate_on_load?(s=t.median(r.data[d],function(t){return t[r.y_accessor]}),n.append("path").attr("class","mg-main-line mg-line"+h+"-color").attr("d",u(r.data[d])).transition().duration(1e3).attr("d",c(r.data[d]))):n.append("path").attr("class","mg-main-line mg-line"+h+"-color").attr("d",c(r.data[d])),r.legend&&(f="<span class='mg-line"+h+"-legend-color'>&mdash; "+r.legend[d]+"&nbsp; </span>"+f)}return r.legend&&e(r.legend_target).html(f),this},this.markers=function(){return u(r),this},this.rollover=function(){var a,n=t.select(e(r.target).find("svg").get(0)),s=e(e(r.target).find("svg").get(0));s.find(".mg-rollover-rect").remove(),s.find(".mg-voronoi").remove(),s.find(".mg-active-datapoint").remove(),s.find(".mg-line-rollover-circle").remove(),n.append("text").attr("class","mg-active-datapoint").classed("mg-active-datapoint-small",r.use_small_class).attr("xml:space","preserve").attr("x",r.width-r.right).attr("y",r.top/2).attr("text-anchor","end"),n.append("circle").classed("mg-line-rollover-circle",!0).attr("cx",0).attr("cy",0).attr("r",0);for(var o=1,i=0;i<r.data.length;i++){for(var l=0;l<r.data[i].length;l++)r.data[i][l].line_id=r.custom_line_color_map.length>0?r.custom_line_color_map[i]:o;o++}if(r.data.length>1){var c=t.geom.voronoi().x(function(t){return r.scales.X(t[r.x_accessor]).toFixed(2)}).y(function(t){return r.scales.Y(t[r.y_accessor]).toFixed(2)}).clipExtent([[r.buffer,r.buffer],[r.width-r.buffer,r.height-r.buffer]]),a=n.append("g").attr("class","mg-voronoi"),u=t.nest().key(function(t){return r.scales.X(t[r.x_accessor])+","+r.scales.Y(t[r.y_accessor])}).rollup(function(t){return t[0]}).entries(t.merge(r.data.map(function(t){return t}))).map(function(t){return t.values});a.selectAll("path").data(c(u)).enter().append("path").attr("d",function(t){return"M"+t.join("L")+"Z"}).datum(function(t){return t.point}).attr("class",function(e){if(r.linked){var a=e[r.x_accessor],n=t.time.format("%Y-%m-%d"),s="number"==typeof a?i:n(a);return"mg-line"+e.line_id+"-color roll_"+s}return"mg-line"+e.line_id+"-color"}).on("mouseover",this.rolloverOn(r)).on("mouseout",this.rolloverOff(r))}else{var o=1;r.custom_line_color_map.length>0&&(o=r.custom_line_color_map[0]);var a=n.append("g").attr("class","mg-rollover-rect"),f=r.data[0].map(r.scalefns.xf);a.selectAll(".mg-rollover-rects").data(r.data[0]).enter().append("rect").attr("class",function(e,a){if(r.linked){var n=e[r.x_accessor],s=t.time.format("%Y-%m-%d"),i="number"==typeof n?a:s(n);return"mg-line"+o+"-color roll_"+i}return"mg-line"+o+"-color"}).attr("x",function(t,e){return 1==f.length?r.left+r.buffer:0==e?f[e].toFixed(2):((f[e-1]+f[e])/2).toFixed(2)}).attr("y",function(t){return r.data.length>1?r.scalefns.yf(t)-6:r.top}).attr("width",function(t,e){return 1==f.length?r.width-r.right-r.buffer:0==e?((f[e+1]-f[e])/2).toFixed(2):e==f.length-1?((f[e]-f[e-1])/2).toFixed(2):((f[e+1]-f[e-1])/2).toFixed(2)}).attr("height",function(){return r.data.length>1?12:r.height-r.bottom-r.top-r.buffer}).attr("opacity",0).on("mouseover",this.rolloverOn(r)).on("mouseout",this.rolloverOff(r)).on("mousemove",this.rolloverMove(r))}return this},this.rolloverOn=function(r){{var a=t.select(e(r.target).find("svg").get(0));t.time.format("%Y-%m-%d")}return function(e,n){if(a.selectAll("circle.mg-line-rollover-circle").attr("class","").attr("class","mg-area"+e.line_id+"-color").classed("mg-line-rollover-circle",!0).attr("cx",function(){return r.scales.X(e[r.x_accessor]).toFixed(2)}).attr("cy",function(){return r.scales.Y(e[r.y_accessor]).toFixed(2)}).attr("r",r.point_size).style("opacity",1),r.linked&&!k.globals.link){k.globals.link=!0;var s=e[r.x_accessor],o=t.time.format("%Y-%m-%d"),i="number"==typeof s?n:o(s);t.selectAll(".mg-line"+e.line_id+"-color.roll_"+i).each(function(e,r){t.select(this).on("mouseover")(e,r)})}a.selectAll("text").filter(function(t){return e==t}).attr("opacity",.3);var l=t.time.format("%b %e, %Y");if("count"==r.format)var c=function(e){var a=e%1!=0,n=t.format("0,000");return e=a?t.round(e,r.decimals):e,n(e)};else var c=function(e){var a=(r.decimals?"."+r.decimals:"")+"%",n=t.format(a);return n(e)};r.show_rollover_text&&a.select(".mg-active-datapoint").text(function(){if(r.time_series){var t=new Date(+e[r.x_accessor]);return t.setDate(t.getDate()),l(t)+"  "+r.yax_units+c(e[r.y_accessor])}return r.x_accessor+": "+e[r.x_accessor]+", "+r.y_accessor+": "+r.yax_units+c(e[r.y_accessor])}),r.mouseover&&r.mouseover(e,n)}},this.rolloverOff=function(r){var a=t.select(e(r.target).find("svg").get(0));return function(e,n){if(r.linked&&k.globals.link){k.globals.link=!1;var s=e[r.x_accessor],o=t.time.format("%Y-%m-%d"),i="number"==typeof s?n:o(s);t.selectAll(".roll_"+i).each(function(e){t.select(this).on("mouseout")(e)})}a.selectAll("circle.mg-line-rollover-circle").style("opacity",0),a.select(".mg-active-datapoint").text(""),r.mouseout&&r.mouseout(e,n)}},this.rolloverMove=function(t){return function(e,r){t.mousemove&&t.mousemove(e,r)}},this.init(r),this},A.histogram=function(r){return this.args=r,this.init=function(t){return f(t),h(t),c(t),i(t),n(t),this},this.mainPlot=function(){var a,n=t.select(e(r.target).find("svg").get(0)),s=e(e(r.target).find("svg").get(0));s.find(".mg-histogram").remove();var a=n.append("g").attr("class","mg-histogram"),o=a.selectAll(".mg-bar").data(r.data[0]).enter().append("g").attr("class","mg-bar").attr("transform",function(t){return"translate("+r.scales.X(t[r.x_accessor]).toFixed(2)+","+r.scales.Y(t[r.y_accessor]).toFixed(2)+")"});return o.append("rect").attr("x",1).attr("width",function(){return 1==r.data[0].length?(r.scalefns.xf(r.data[0][0])-r.bar_margin).toFixed(2):(r.scalefns.xf(r.data[0][1])-r.scalefns.xf(r.data[0][0])-r.bar_margin).toFixed(2)}).attr("height",function(t){return 0==t[r.y_accessor]?0:(r.height-r.bottom-r.buffer-r.scales.Y(t[r.y_accessor])).toFixed(2)}),this},this.markers=function(){return u(r),this},this.rollover=function(){var a,n=t.select(e(r.target).find("svg").get(0)),s=e(e(r.target).find("svg").get(0));s.find(".mg-rollover-rect").remove(),s.find(".mg-active-datapoint").remove(),n.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",r.width-r.right).attr("y",r.top/2).attr("text-anchor","end");var a=n.append("g").attr("class","mg-rollover-rect"),o=a.selectAll(".mg-bar").data(r.data[0]).enter().append("g").attr("class",function(t,e){return r.linked?"mg-rollover-rects roll_"+e:"mg-rollover-rects"}).attr("transform",function(t){return"translate("+r.scales.X(t[r.x_accessor])+",0)"});o.append("rect").attr("x",1).attr("y",0).attr("width",function(t,e){return 1==r.data[0].length?(r.scalefns.xf(r.data[0][0])-r.bar_margin).toFixed(2):e!=r.data[0].length-1?(r.scalefns.xf(r.data[0][e+1])-r.scalefns.xf(t)).toFixed(2):(r.scalefns.xf(r.data[0][1])-r.scalefns.xf(r.data[0][0])).toFixed(2)}).attr("height",function(){return r.height}).attr("opacity",0).on("mouseover",this.rolloverOn(r)).on("mouseout",this.rolloverOff(r)).on("mousemove",this.rolloverMove(r))},this.rolloverOn=function(r){{var a=t.select(e(r.target).find("svg").get(0));t.time.format("%Y-%m-%d")}return function(n,s){a.selectAll("text").filter(function(t){return n==t}).attr("opacity",.3);var o=t.time.format("%b %e, %Y");if("count"==r.format)var i=function(e){var a=e%1!=0,n=t.format("0,000");return e=a?t.round(e,r.decimals):e,n(e)};else var i=function(e){var a=(r.decimals?"."+r.decimals:"")+"%",n=t.format(a);return n(e)};t.selectAll(e(r.target).find(" svg .mg-bar :eq("+s+")")).classed("active",!0),r.linked&&!k.globals.link&&(k.globals.link=!0,t.selectAll(".mg-rollover-rects.roll_"+s+" rect").each(function(e){t.select(this).on("mouseover")(e,s)})),r.show_rollover_text&&a.select(".mg-active-datapoint").text(function(){if(r.time_series){var t=new Date(+n[r.x_accessor]);return t.setDate(t.getDate()),o(t)+"  "+r.yax_units+i(n[r.y_accessor])}return r.x_accessor+": "+i(n[r.x_accessor])+", "+r.y_accessor+": "+r.yax_units+i(n[r.y_accessor])}),r.mouseover&&r.mouseover(n,s)}},this.rolloverOff=function(r){var a=t.select(e(r.target).find("svg").get(0));return function(n,s){r.linked&&k.globals.link&&(k.globals.link=!1,t.selectAll(".mg-rollover-rects.roll_"+s+" rect").each(function(e){t.select(this).on("mouseout")(e,s)})),t.selectAll(e(r.target).find("svg .mg-bar :eq("+s+")")).classed("active",!1),a.select(".mg-active-datapoint").text(""),r.mouseout&&r.mouseout(n,s)}},this.rolloverMove=function(t){return function(e,r){t.mousemove&&t.mousemove(e,r)}},this.init(r),this},A.point=function(r){return this.args=r,this.init=function(t){return f(t),g(t),c(t),i(t),n(t),this},this.markers=function(){return u(r),r.least_squares&&m(r),this},this.mainPlot=function(){var a,n=t.select(e(r.target).find("svg").get(0)),s=e(e(r.target).find("svg").get(0));s.find(".mg-points").remove(),a=n.append("g").classed("mg-points",!0);var o=a.selectAll("circle").data(r.data[0]).enter().append("svg:circle").attr("class",function(t,e){return"path-"+e}).attr("cx",r.scalefns.xf).attr("cy",r.scalefns.yf);return null!=r.color_accessor?(o.attr("fill",r.scalefns.color),o.attr("stroke",r.scalefns.color)):o.classed("mg-points-mono",!0),null!=r.size_accessor?o.attr("r",r.scalefns.size):o.attr("r",r.point_size),this},this.rollover=function(){var a=t.select(e(r.target).find("svg").get(0)),n=e(e(r.target).find("svg").get(0));n.find(".mg-voronoi").remove(),n.find(".mg-active-datapoint").remove(),a.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",r.width-r.right).attr("y",r.top/2).attr("text-anchor","end");var s=t.geom.voronoi().x(r.scalefns.xf).y(r.scalefns.yf).clipExtent([[r.buffer,r.buffer],[r.width-r.buffer,r.height-r.buffer]]),o=a.append("g").attr("class","mg-voronoi");return o.selectAll("path").data(s(r.data[0])).enter().append("path").attr("d",function(t){return void 0!=t?"M"+t.join(",")+"Z":void 0}).attr("class",function(t,e){return"path-"+e}).style("fill-opacity",0).on("mouseover",this.rolloverOn(r)).on("mouseout",this.rolloverOff(r)).on("mousemove",this.rolloverMove(r)),this},this.rolloverOn=function(r){var a=t.select(e(r.target).find("svg").get(0));return function(e,n){a.selectAll(".mg-points circle").classed("selected",!1);var s=a.selectAll(".mg-points circle.path-"+n).classed("selected",!0);r.size_accessor?s.attr("r",function(t){return r.scalefns.size(t)+1}):s.attr("r",r.point_size),r.linked&&!globals.link&&(globals.link=!0,t.selectAll(".mg-voronoi .path-"+n).each(function(){t.select(this).on("mouseover")(e,n)}));var o=t.time.format("%b %e, %Y");if("count"==r.format)var i=function(e){var a=e%1!=0,n=t.format("0,000");return e=a?t.round(e,r.decimals):e,n(e)};else var i=function(e){var a=(r.decimals?"."+r.decimals:"")+"%",n=t.format(a);return n(e)};r.show_rollover_text&&a.select(".mg-active-datapoint").text(function(){if(r.time_series){var t=new Date(+e.point[r.x_accessor]);return t.setDate(t.getDate()),o(t)+"  "+r.yax_units+i(e.point[r.y_accessor])}return r.x_accessor+": "+i(e.point[r.x_accessor])+", "+r.y_accessor+": "+r.yax_units+i(e.point[r.y_accessor])}),r.mouseover&&r.mouseover(e,n)}},this.rolloverOff=function(r){var a=t.select(e(r.target).find("svg").get(0));return function(e,n){r.linked&&globals.link&&(globals.link=!1,t.selectAll(".mg-voronoi .path-"+n).each(function(){t.select(this).on("mouseout")(e,n)}));var s=a.selectAll(".mg-points circle").classed("unselected",!1).classed("selected",!1);r.size_accessor?s.attr("r",r.scalefns.size):s.attr("r",r.point_size),a.select(".mg-active-datapoint").text(""),r.mouseout&&r.mouseout(e,n)}},this.rolloverMove=function(t){return function(e,r){t.mousemove&&t.mousemove(e,r)}},this.update=function(){return this},this.init(r),this},A.bar=function(r){return this.args=r,this.is_vertical=!0,this.init=function(t){return f(t),p(t),c(t),this.is_vertical="vertical"===t.bar_orientation,this.is_vertical?(l(t),n(t)):(i(t),s(t)),this},this.mainPlot=function(){var a,n,s,o=t.select(r.target).select("svg"),i=r.data[0],l=o.select(".mg-barplot"),c=l.empty(),u=c&&r.animate_on_load,f=u||r.transition_on_update,d=r.transition_duration||1e3;c?(l=o.append("g").classed("mg-barplot",!0),a=l.selectAll(".mg-bar").data(i).enter().append("rect").classed("mg-bar",!0),r.predictor_accessor&&(n=l.selectAll(".mg-bar-prediction").data(i).enter().append("rect").classed("mg-bar-prediction",!0)),r.baseline_accessor&&(s=l.selectAll(".mg-bar-baseline").data(i).enter().append("line").classed("mg-bar-baseline",!0))):(l=o.select("g.mg-barplot"),e(o.node()).find(".mg-y-axis").after(e(l.node()).detach()),a=l.selectAll("rect.mg-bar"),r.predictor_accessor&&(n=l.selectAll(".mg-bar-prediction")),r.baseline_accessor&&(n=l.selectAll(".mg-bar-baseline")));var h;if(this.is_vertical){if(h=r.scales.X.rangeBand()/1.5,u&&a.attr("height",0).attr("y",r.scales.Y(0)),f&&(a=a.transition().duration(d)),a.attr("y",function(t){return r.scales.Y(0)-(r.scales.Y(0)-r.scalefns.yf(t))}).attr("x",function(t){return r.scalefns.xf(t)+h/2}).attr("width",h).attr("height",function(t){return 0-(r.scalefns.yf(t)-r.scales.Y(0))}),r.predictor_accessor){var p=r.predictor_proportion,g=p-1;u&&n.attr("height",0).attr("y",r.scales.Y(0)),f&&(n=n.transition().duration(d)),n.attr("y",function(t){return r.scales.Y(0)-(r.scales.Y(0)-r.scales.Y(t[r.predictor_accessor]))}).attr("x",function(t){return r.scalefns.xf(t)+g*h/(2*p)+h/2}).attr("width",h/p).attr("height",function(t){return 0-(r.scales.Y(t[r.predictor_accessor])-r.scales.Y(0))})}r.baseline_accessor&&(u&&s.attr({y1:r.scales.Y(0),y2:r.scales.Y(0)}),f&&(s=s.transition().duration(d)),s.attr("x1",function(t){return r.scalefns.xf(t)+h/2-h/p+h/2}).attr("x2",function(t){return r.scalefns.xf(t)+h/2+h/p+h/2}).attr("y1",function(t){return r.scales.Y(t[r.baseline_accessor])}).attr("y2",function(t){return r.scales.Y(t[r.baseline_accessor])}))}else{if(h=r.scales.Y.rangeBand()/1.5,u&&a.attr("width",0),f&&(a=a.transition().duration(d)),a.attr("x",r.scales.X(0)).attr("y",function(t){return r.scalefns.yf(t)+h/2}).attr("height",h).attr("width",function(t){return r.scalefns.xf(t)-r.scales.X(0)}),r.predictor_accessor){var p=r.predictor_proportion,g=p-1;u&&n.attr("width",0),f&&(n=n.transition().duration(d)),n.attr("x",r.scales.X(0)).attr("y",function(t){return r.scalefns.yf(t)+g*h/(2*p)+h/2}).attr("height",h/p).attr("width",function(t){return r.scales.X(t[r.predictor_accessor])-r.scales.X(0)})}r.baseline_accessor&&(u&&s.attr({x1:r.scales.X(0),x2:r.scales.X(0)}),f&&(s=s.transition().duration(d)),s.attr("x1",function(t){return r.scales.X(t[r.baseline_accessor])}).attr("x2",function(t){return r.scales.X(t[r.baseline_accessor])}).attr("y1",function(t){return r.scalefns.yf(t)+h/2-h/p+h/2}).attr("y2",function(t){return r.scalefns.yf(t)+h/2+h/p+h/2}))}return this},this.markers=function(){return u(r),this},this.rollover=function(){var a,n=t.select(e(r.target).find("svg").get(0)),s=e(e(r.target).find("svg").get(0));s.find(".mg-rollover-rect").remove(),s.find(".mg-active-datapoint").remove(),n.append("text").attr("class","mg-active-datapoint").attr("xml:space","preserve").attr("x",r.width-r.right).attr("y",r.top/2).attr("dy",".35em").attr("text-anchor","end");var a=n.append("g").attr("class","mg-rollover-rect"),o=a.selectAll(".mg-bar-rollover").data(r.data[0]).enter().append("rect").attr("class","mg-bar-rollover");this.is_vertical?o.attr("x",r.scalefns.xf).attr("y",function(){return r.scales.Y(0)-r.height}).attr("width",r.scales.X.rangeBand()).attr("height",r.height).attr("opacity",0).on("mouseover",this.rolloverOn(r)).on("mouseout",this.rolloverOff(r)).on("mousemove",this.rolloverMove(r)):o.attr("x",r.scales.X(0)).attr("y",r.scalefns.yf).attr("width",r.width).attr("height",r.scales.Y.rangeBand()+2).attr("opacity",0).on("mouseover",this.rolloverOn(r)).on("mouseout",this.rolloverOff(r)).on("mousemove",this.rolloverMove(r))},this.rolloverOn=function(r){var a=t.select(e(r.target).find("svg").get(0)),n=(t.time.format("%Y-%m-%d"),this.is_vertical?r.x_accessor:r.y_accessor),s=this.is_vertical?r.y_accessor:r.x_accessor,o=this.is_vertical?r.yax_units:r.xax_units;return function(i,l){a.selectAll("text").filter(function(t){return i==t}).attr("opacity",.3);var c=t.time.format("%b %e, %Y");if("count"==r.format)var u=function(e){var a=e%1!=0,n=t.format("0,000");return e=a?t.round(e,r.decimals):e,n(e)};else var u=function(e){var a=(r.decimals?"."+r.decimals:"")+"%",n=t.format(a);return n(e)};t.selectAll(e(r.target+" svg g.mg-barplot .mg-bar:eq("+l+")")).classed("active",!0),r.show_rollover_text&&a.select(".mg-active-datapoint").text(function(){if(r.time_series){var t=new Date(+i[s]);return t.setDate(t.getDate()),c(t)+"  "+o+u(i[n])}return i[n]+": "+u(i[s])}),r.mouseover&&r.mouseover(i,l)}},this.rolloverOff=function(r){var a=t.select(e(r.target).find("svg").get(0));return function(n,s){t.selectAll(e(r.target).find("svg g.mg-barplot .mg-bar:eq("+s+")")).classed("active",!1),a.select(".mg-active-datapoint").text(""),r.mouseout&&r.mouseout(n,s)}},this.rolloverMove=function(t){return function(e,r){t.mousemove&&t.mousemove(e,r)}},this.init(r),this},k.data_table=function(a){return this.args=a,this.args.standard_col={width:150,font_size:12,font_weight:"normal"},this.args.columns=[],this.formatting_options=[["color","color"],["font-weight","font_weight"],["font-style","font_style"],["font-size","font_size"]],this._strip_punctuation=function(t){var e=t.replace(/[^a-zA-Z0-9 _]+/g,""),r=e.replace(/ +?/g,"");return r},this._format_element=function(t,e,r){this.formatting_options.forEach(function(a){var n=a[0],s=a[1];r[s]&&t.style(n,"string"==typeof r[s]||"number"==typeof r[s]?r[s]:r[s](e))})},this._add_column=function(t,e){var r=this.args.standard_col,a=_(k.clone(t),k.clone(r));a.type=e,this.args.columns.push(a)},this.target=function(){var t=arguments[0];return this.args.target=t,this},this.title=function(){return this._add_column(arguments[0],"title"),this},this.text=function(){return this._add_column(arguments[0],"text"),this},this.bullet=function(){return this},this.sparkline=function(){return this},this.number=function(){return this._add_column(arguments[0],"number"),this},this.display=function(){var a,n=this.args;r(n);var a,s,o,i,l,c,u,f,d,h,p,g=n.target,m=t.select(g).append("table").classed("mg-data-table",!0),v=m.append("colgroup"),_=m.append("thead"),x=m.append("tbody");o=_.append("tr");for(var y=0;y<n.columns.length;y++){var b=n.columns[y];c=b.type,f=b.label,f=void 0==f?"":f,i=o.append("th").style("width",b.width).style("text-align","title"==c?"left":"right").text(f),b.description&&(i.append("i").classed("fa",!0).classed("fa-question-circle",!0).classed("fa-inverse",!0),e(i[0]).popover({html:!0,animation:!1,content:b.description,trigger:"hover",placement:"top",container:e(i[0])}))}for(var y=0;y<n.columns.length;y++)p=v.append("col"),"number"==n.columns[y].type&&p.attr("align","char").attr("char",".");for(var w=0;w<n.data.length;w++){o=x.append("tr");for(var k=0;k<n.columns.length;k++){if(a=n.columns[k],l=a.accessor,u=d=n.data[w][l],c=a.type,"number"==c){if(a.hasOwnProperty("round")&&!a.hasOwnProperty("format")&&(d=t.format("0,."+a.round+"f")(d)),a.hasOwnProperty("value_formatter")&&(d=a.value_formatter(d)),a.hasOwnProperty("format")){a.round&&(d=t.round(d,a.round));var A,D=a.format;"percentage"==D&&(A=t.format("%p")),"count"==D&&(A=t.format("0,000")),"temperature"==D&&(A=function(t){return t+""}),d=A(d)}a.hasOwnProperty("currency")&&(d=a.currency+d)}h=o.append("td").classed("table-"+c,!0).classed("table-"+c+"-"+this._strip_punctuation(l),!0).attr("data-value",u).style("width",a.width).style("text-align","title"==c||"text"==c?"left":"right"),this._format_element(h,u,a),"title"==c?(s=h.append("div").text(d),this._format_element(s,d,a),n.columns[k].hasOwnProperty("secondary_accessor")&&h.append("div").text(n.data[w][n.columns[k].secondary_accessor]).classed("secondary-title",!0)):h.text(d)}}return this},this},A.missing=function(a){return this.args=a,this.init=function(a){r(a),t.select(a.target).selectAll("svg").data([a]).enter().append("svg").attr("width",a.width).attr("height",a.height),t.select(a.target).selectAll("svg *").remove();var n=t.select(a.target).select("svg");return n.classed("mg-missing",!0),a.legend_target&&e(a.legend_target).html(""),n.selectAll(".mg-missing-text").data([a.missing_text]).enter().append("text").attr("class","mg-missing-text").attr("x",a.width/2).attr("y",a.height/2).attr("dy",".50em").attr("text-anchor","middle").text(a.missing_text),this},this.init(a),this},k.convert={},k.convert.date=function(e,r,a){return a="undefined"==typeof a?"%Y-%m-%d":a,e=e.map(function(e){var n=t.time.format(a);return e[r]=n.parse(e[r]),e})},k.convert.number=function(t,e){return t=t.map(function(t){return t[e]=Number(t[e]),t})};var D=function(t,e,r){if(null==t)return t;if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e,r);else if(t.length===+t.length){for(var a=0,n=t.length;n>a;a++)if(e.call(r,t[a],a,t)===breaker)return}else for(var s in t)if(e.call(r,t[s],s,t)===breaker)return;return t};return k.clone=function(t){if(null==t||"object"!=typeof t)return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var e=[],r=0,a=t.length;a>r;r++)e[r]=k.clone(t[r]);return e}if(t instanceof Object){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=k.clone(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},k})}).call(this);